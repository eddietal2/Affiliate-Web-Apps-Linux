"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[4746],{4746:(v,a,n)=>{n.r(a),n.d(a,{UsersPageModule:()=>A});var u=n(9808),p=n(4182),r=n(2974),d=n(1e3),g=n(655),e=n(2096),U=n(4766),h=n(520);let m=(()=>{class s{constructor(t){this.http=t,this.BACKEND_URL=U.N.url}getAllUsers(){return this.http.get(`${this.BACKEND_URL}/admin/get-all-users`)}deleteUser(t){return this.http.post(`${this.BACKEND_URL}/admin/delete-user`,{id:t})}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(h.eN))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();function Z(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ion-accordion",2),e.TgZ(1,"ion-item",3),e.TgZ(2,"ion-label"),e.TgZ(3,"p",4),e._uU(4),e.qZA(),e.TgZ(5,"p",5),e._uU(6),e.qZA(),e.qZA(),e.qZA(),e.TgZ(7,"ion-list",6),e.TgZ(8,"ion-item"),e.TgZ(9,"ion-label"),e.TgZ(10,"h2"),e._uU(11,"Reviews"),e.qZA(),e.TgZ(12,"p",7),e._uU(13),e.qZA(),e.qZA(),e.TgZ(14,"ion-label"),e.TgZ(15,"h2"),e._uU(16,"Date Registered"),e.qZA(),e.TgZ(17,"p",7),e._uU(18),e.qZA(),e.qZA(),e.qZA(),e.TgZ(19,"ion-item"),e.TgZ(20,"ion-button",8),e.NdJ("click",function(){const c=e.CHM(t).$implicit;return e.oxw().tryDeleteUser(c._id)}),e._uU(21," Delete "),e.qZA(),e.TgZ(22,"ion-button",9),e.NdJ("click",function(){e.CHM(t);const i=e.oxw(),c=e.MAs(6);return i.tryCloseUser(c)}),e._uU(23," Close "),e.qZA(),e.qZA(),e.qZA(),e.qZA()}if(2&s){const t=o.$implicit;e.s9C("value",t._id),e.xp6(4),e.Oqu(t.fullName),e.xp6(2),e.Oqu(t.email),e.xp6(7),e.Oqu(t.reviews.length),e.xp6(5),e.Oqu(t.dateRegistered)}}const f=[{path:"",component:(()=>{class s{constructor(t,l,i){this.usersService=t,this.alertController=l,this.loadingController=i,this.allUsers=[]}ngOnInit(){this.usersService.getAllUsers().subscribe(t=>{this.allUsers=Object.values(t),console.log(this.allUsers)})}tryDeleteUser(t){return(0,g.mG)(this,void 0,void 0,function*(){console.log(t),yield(yield this.alertController.create({cssClass:"my-custom-class",header:"Delete this User?",message:"Are you sure you want to Delete this User? This cannot be undone.",buttons:[{text:"Cancel",role:"cancel",cssClass:"secondary",id:"cancel-button",handler:i=>{console.log("Confirm Cancel: blah")}},{text:"Delete",id:"confirm-button",handler:()=>{this.deleteUserSub=this.usersService.deleteUser(t).subscribe(i=>(0,g.mG)(this,void 0,void 0,function*(){const c=yield this.loadingController.create({cssClass:"my-custom-class",message:"Deleting User ...",duration:2e3});yield c.present(),yield c.onDidDismiss().then(()=>this.allUsers=i.remainingUsers)}))}}]})).present()})}tryCloseUser(t){t.value=void 0}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(m),e.Y36(r.Br),e.Y36(r.HT))},s.\u0275cmp=e.Xpm({type:s,selectors:[["app-users"]],decls:8,vars:2,consts:[["userAccordianGroup",""],["class","user-wrapper",3,"value",4,"ngFor","ngForOf"],[1,"user-wrapper",3,"value"],["slot","header"],[1,"user-name"],[1,"user-email"],["slot","content"],[1,"product-rating"],["color","danger",1,"edit-product-button",3,"click"],["color","dark",1,"edit-product-button",3,"click"]],template:function(t,l){1&t&&(e.TgZ(0,"ion-header"),e.TgZ(1,"ion-toolbar"),e.TgZ(2,"ion-title"),e._uU(3),e.qZA(),e.qZA(),e.qZA(),e.TgZ(4,"ion-content"),e.TgZ(5,"ion-accordion-group",null,0),e.YNc(7,Z,24,5,"ion-accordion",1),e.qZA(),e.qZA()),2&t&&(e.xp6(3),e.hij("Users ~ ",l.allUsers.length," "),e.xp6(4),e.Q6J("ngForOf",l.allUsers))},directives:[r.Gu,r.sr,r.wd,r.W2,r.eh,u.sg,r.We,r.Ie,r.Q$,r.q_,r.YG],styles:[".user-wrapper[_ngcontent-%COMP%]   ion-list[_ngcontent-%COMP%]{padding-bottom:3em}.user-wrapper[_ngcontent-%COMP%]   .edit-user-button[_ngcontent-%COMP%]{--background: #555;--color: #fff}.user-wrapper[_ngcontent-%COMP%]   .user-title[_ngcontent-%COMP%]{color:#fff}.user-wrapper[_ngcontent-%COMP%]   .user-email[_ngcontent-%COMP%]{color:#999}"]}),s})()}];let C=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[[d.Bz.forChild(f)],d.Bz]}),s})(),A=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[[u.ez,p.u5,r.Pc,C]]}),s})()}}]);