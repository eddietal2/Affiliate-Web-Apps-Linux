"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[1726],{1726:(J,Z,g)=>{g.r(Z),g.d(Z,{RegisterPageModule:()=>N});var p=g(9808),s=g(4182),r=g(2974),h=g(788),d=g(655),f=g(7221),e=g(2096),v=g(4604);function T(t,n){if(1&t&&(e.TgZ(0,"div",31),e._uU(1),e.qZA()),2&t){const o=e.oxw().$implicit;e.xp6(1),e.hij(" ",o.message," ")}}function y(t,n){if(1&t&&(e.ynx(0),e.YNc(1,T,2,1,"div",30),e.BQk()),2&t){const o=n.$implicit,i=e.oxw();e.xp6(1),e.Q6J("ngIf",i.registerForm.get("firstName").hasError(o.type)&&(i.registerForm.get("firstName").dirty||i.registerForm.get("firstName").touched))}}function b(t,n){if(1&t&&(e.TgZ(0,"div",31),e._uU(1),e.qZA()),2&t){const o=e.oxw().$implicit;e.xp6(1),e.hij(" ",o.message," ")}}function x(t,n){if(1&t&&(e.ynx(0),e.YNc(1,b,2,1,"div",30),e.BQk()),2&t){const o=n.$implicit,i=e.oxw();e.xp6(1),e.Q6J("ngIf",i.registerForm.get("lastName").hasError(o.type)&&(i.registerForm.get("lastName").dirty||i.registerForm.get("lastName").touched))}}function A(t,n){if(1&t&&(e.TgZ(0,"div",31),e._uU(1),e.qZA()),2&t){const o=e.oxw().$implicit;e.xp6(1),e.hij(" ",o.message," ")}}function q(t,n){if(1&t&&(e.ynx(0),e.YNc(1,A,2,1,"div",30),e.BQk()),2&t){const o=n.$implicit,i=e.oxw();e.xp6(1),e.Q6J("ngIf",i.registerForm.get("email").hasError(o.type)&&(i.registerForm.get("email").dirty||i.registerForm.get("email").touched))}}function P(t,n){if(1&t&&(e.TgZ(0,"div",31),e._uU(1),e.qZA()),2&t){const o=e.oxw().$implicit;e.xp6(1),e.hij(" ",o.message," ")}}function C(t,n){if(1&t&&(e.ynx(0),e.YNc(1,P,2,1,"div",30),e.BQk()),2&t){const o=n.$implicit,i=e.oxw();e.xp6(1),e.Q6J("ngIf",i.registerForm.get("password").hasError(o.type)&&(i.registerForm.get("password").dirty||i.registerForm.get("password").touched))}}function w(t,n){if(1&t&&(e.TgZ(0,"div",31),e._uU(1),e.qZA()),2&t){const o=e.oxw().$implicit;e.xp6(1),e.hij(" ",o.message," ")}}function U(t,n){if(1&t&&(e.ynx(0),e.YNc(1,w,2,1,"div",30),e.BQk()),2&t){const o=n.$implicit,i=e.oxw();e.xp6(1),e.Q6J("ngIf",i.registerForm.get("reTypePassword").hasError(o.type)&&(i.registerForm.get("reTypePassword").dirty||i.registerForm.get("reTypePassword").touched))}}function k(t,n){if(1&t){const o=e.EpF();e.TgZ(0,"ion-content",32),e.TgZ(1,"ion-button",33),e.NdJ("click",function(){return e.CHM(o),e.oxw().closeSuccessModal()}),e._uU(2," Close "),e.qZA(),e.TgZ(3,"h1"),e._uU(4,"You have successfully registered!"),e.qZA(),e.qZA()}}const R=[{path:"",component:(()=>{class t{constructor(o,i,l,c,a,m){this.formBuilder=o,this.registerService=i,this.loadingController=l,this.toastController=c,this.alertController=a,this.router=m,this.registerSuccessModal=!1,this.validationMessasges={firstName:[{type:"text",message:"Must be a valid Name."}],lastName:[{type:"text",message:"Must be a valid Name."}],email:[{type:"email",message:"Must be a valid email address"}],password:[{type:"pattern",message:"Password must be at least 6 characters with at least one lowercase character, one uppcase character, and one number."}]}}ngOnInit(){this.createRegisterFormBuilder(),this.registerForm.statusChanges.subscribe(o=>{console.log(o)})}createRegisterFormBuilder(){return this.registerForm=this.formBuilder.group({firstName:["TEST",[s.kI.required]],lastName:["TEST",[s.kI.required]],email:["eddie@journi.org",[s.kI.required,s.kI.email]],password:["12345678",s.kI.compose([s.kI.minLength(8),s.kI.maxLength(8),s.kI.required])],reTypePassword:["12345678",s.kI.compose([s.kI.minLength(8),s.kI.maxLength(8),s.kI.required])]})}goToLoginPage(){this.router.navigateByUrl("/login")}tryRegister(){return(0,d.mG)(this,void 0,void 0,function*(){if(this.registerForm.controls.password.value!=this.registerForm.controls.reTypePassword.value)return console.log("Passwords do not match."),void(yield this.toastController.create({message:"Passwords do not match.",cssClass:"danger-toast",duration:4e3})).present();let i,o={fullName:this.registerForm.controls.firstName.value+" "+this.registerForm.controls.lastName.value,email:this.registerForm.controls.email.value,password:this.registerForm.controls.password.value};(function(a){(0,d.mG)(this,void 0,void 0,function*(){let m="";const u="0123456789",M=u.length;for(let _=0;_<4;_++)m+=u.charAt(Math.floor(Math.random()*M));return i=m})})(),this.code=i;let c=this.registerForm.controls.email.value;this.sendRegisterCodeSub=this.registerService.sendRegisterCode(this.code,c).subscribe(a=>(0,d.mG)(this,void 0,void 0,function*(){console.log(a),(yield this.loadingController.create({cssClass:"default-loading",spinner:"circles",duration:2e3})).present().then(()=>{setTimeout(()=>{this.enterCodeAlert(c,o).catch(u=>{throw console.log("Error: "+u),Error(u)}).then(u=>{console.log("Response: "+u)}).finally(()=>{console.log("Enter Code Resolved")})},2500)})}))})}enterCodeAlert(o,i){return(0,d.mG)(this,void 0,void 0,function*(){yield(yield this.alertController.create({cssClass:"my-custom-class",header:"Enter 4 Digit Code",message:`Please enter code that was sent to ${o}`,buttons:[{text:"Submit",handler:()=>(0,d.mG)(this,void 0,void 0,function*(){console.log("Confirm Okay");let c=document.getElementById("enter-code-alert-input");this.code!=c.value&&(console.log("Codes do not match"),yield(yield this.toastController.create({message:"Codes do not match!",cssClass:"danger-toast",duration:2e3})).present()),this.code==c.value&&(console.log("The Codes Matched!"),yield this.registerService.register(i).pipe((0,f.K)(a=>{throw console.error(a),"The user already exists"===a.error.msg?this.registerErrorAlert("The User already exists","Please use another Email"):a.message.startsWith("Http failure response")?this.registerErrorAlert("Server Connection Error","Please try again later."):a.message.startsWith("Http failure response"),new Error(a)})).subscribe(a=>{console.log(a),this.showSuccessModal()}),yield setTimeout(()=>{this.registerSub.unsubscribe(),this.sendRegisterCodeSub.unsubscribe()},800))})},{text:"Resend",cssClass:"secondary",handler:c=>{console.log("Confirm Cancel: blah"),document.getElementById("enter-code-alert-input")}},{text:"Cancel",role:"cancel",cssClass:"secondary",handler:c=>{console.log("Confirm Cancel: blah")}}],inputs:[{name:"code",type:"text",id:"enter-code-alert-input",placeholder:"Enter Code Here: "}]})).present()})}registerErrorAlert(o,i){return(0,d.mG)(this,void 0,void 0,function*(){yield(yield this.alertController.create({cssClass:"danger-alert",header:o,message:i,buttons:[{text:"OK"}]})).present()})}showSuccessModal(){return this.registerSuccessModal=!0}closeSuccessModal(){this.registerSuccessModal=!1,this.registerForm.reset(),this.registerSuccessNavigationLoading(),setTimeout(()=>{this.backToLoginFromSuccessModal()},1e3)}backToLoginFromSuccessModal(){this.router.navigateByUrl("/login")}registerSuccessNavigationLoading(){return(0,d.mG)(this,void 0,void 0,function*(){const o=yield this.loadingController.create({cssClass:"success-loading",message:"You should be able to Log in now!",duration:2e3});yield o.present(),yield o.onDidDismiss(),console.log("Loading dismissed!")})}backToLogin(){this.router.navigateByUrl("/login")}}return t.\u0275fac=function(o){return new(o||t)(e.Y36(s.qu),e.Y36(v.a),e.Y36(r.HT),e.Y36(r.yF),e.Y36(r.Br),e.Y36(h.F0))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-register"]],decls:88,vars:9,consts:[[1,"ion-hide-lg-up"],["slot","start"],[1,"ion-justify-content-center"],["size-xs","11","size-sm","10","size-md","8","size-lg","6",2,"padding","0"],["color","success"],[3,"click"],["name","arrow-back-outline"],["id","register-form",3,"formGroup"],[1,"spacer-3x"],[1,"static-alert-yellow"],["position","floating"],["color","danger"],["required","","formControlName","firstName","maxlength","40","type","text"],[1,"validation-errors"],[4,"ngFor","ngForOf"],["required","","formControlName","lastName","maxlength","40","type","text"],["required","","formControlName","email","maxlength","80","type","email"],[1,"spacer-4x"],[1,"static-alert-red"],["required","","formControlName","password","maxlength","8","type","password"],["required","","formControlName","reTypePassword","maxlength","8","type","password"],[1,"ion-hide-lg-down","ion-justify-content-center"],["size","5",1,"ion-text-center"],[1,"spacer-2x"],["id","register-button-lg","color","success","type","submit",3,"disabled","click"],["id","cancel-button-lg","color","medium",3,"click"],["size-lg","6",1,"register-background-lg","ion-hide-lg-down"],[3,"isOpen"],["id","register-button","color","success","type","submit",2,"display","block",3,"disabled","click"],["id","cancel-button","color","medium",2,"display","block",3,"click"],["class","validation-error-message",4,"ngIf"],[1,"validation-error-message"],[2,"--background","green"],["expand","block","fill","clear","shape","round",3,"click"]],template:function(o,i){1&o&&(e.TgZ(0,"ion-header",0),e.TgZ(1,"ion-toolbar"),e.TgZ(2,"ion-buttons",1),e._UZ(3,"ion-back-button"),e.qZA(),e.TgZ(4,"ion-title"),e._uU(5,"Register"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(6,"ion-content"),e.TgZ(7,"ion-grid"),e.TgZ(8,"ion-row",2),e.TgZ(9,"ion-col",3),e.TgZ(10,"ion-toolbar",4),e.TgZ(11,"ion-buttons",1),e.TgZ(12,"ion-button",5),e.NdJ("click",function(){return i.backToLogin()}),e._UZ(13,"ion-icon",6),e._uU(14," Back "),e.qZA(),e.qZA(),e.TgZ(15,"ion-title"),e._uU(16,"Register"),e.qZA(),e.qZA(),e.TgZ(17,"form",7),e._UZ(18,"div",8),e.TgZ(19,"h2"),e._uU(20,"Info"),e.qZA(),e.TgZ(21,"div",9),e.TgZ(22,"p"),e._uU(23,"Please fill out the entire form."),e.qZA(),e.qZA(),e.TgZ(24,"ion-item"),e.TgZ(25,"ion-label",10),e._uU(26,"First Name "),e.TgZ(27,"ion-text",11),e._uU(28,"*"),e.qZA(),e.qZA(),e._UZ(29,"ion-input",12),e.TgZ(30,"div",13),e.YNc(31,y,2,1,"ng-container",14),e.qZA(),e.qZA(),e.TgZ(32,"ion-item"),e.TgZ(33,"ion-label",10),e._uU(34,"Last Name "),e.TgZ(35,"ion-text",11),e._uU(36,"*"),e.qZA(),e.qZA(),e._UZ(37,"ion-input",15),e.TgZ(38,"div",13),e.YNc(39,x,2,1,"ng-container",14),e.qZA(),e.qZA(),e.TgZ(40,"ion-item"),e.TgZ(41,"ion-label",10),e._uU(42,"Email "),e.TgZ(43,"ion-text",11),e._uU(44,"*"),e.qZA(),e.qZA(),e._UZ(45,"ion-input",16),e.TgZ(46,"div",13),e.YNc(47,q,2,1,"ng-container",14),e.qZA(),e.qZA(),e._UZ(48,"div",17),e.TgZ(49,"h2"),e._uU(50,"Password"),e.qZA(),e.TgZ(51,"div",18),e.TgZ(52,"p"),e._uU(53,"Passwords have to be at least 8 characters."),e.qZA(),e.qZA(),e.TgZ(54,"ion-item"),e.TgZ(55,"ion-label",10),e._uU(56,"Password "),e.TgZ(57,"ion-text",11),e._uU(58,"*"),e.qZA(),e.qZA(),e._UZ(59,"ion-input",19),e.TgZ(60,"div",13),e.YNc(61,C,2,1,"ng-container",14),e.qZA(),e.qZA(),e.TgZ(62,"ion-item"),e.TgZ(63,"ion-label",10),e._uU(64,"Re-type Password "),e.TgZ(65,"ion-text",11),e._uU(66,"*"),e.qZA(),e.qZA(),e._UZ(67,"ion-input",20),e.TgZ(68,"div",13),e.YNc(69,U,2,1,"ng-container",14),e.qZA(),e.qZA(),e.qZA(),e.TgZ(70,"ion-row",21),e.TgZ(71,"ion-col",22),e._UZ(72,"div",23),e.TgZ(73,"ion-button",24),e.NdJ("click",function(){return i.tryRegister()}),e._uU(74," Register "),e.qZA(),e._UZ(75,"br"),e._UZ(76,"div",23),e.TgZ(77,"ion-button",25),e.NdJ("click",function(){return i.goToLoginPage()}),e._uU(78," Cancel "),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e._UZ(79,"ion-col",26),e.qZA(),e.qZA(),e.TgZ(80,"ion-modal",27),e.YNc(81,k,5,0,"ng-template"),e.qZA(),e.qZA(),e.TgZ(82,"ion-footer",0),e._UZ(83,"div",23),e.TgZ(84,"ion-button",28),e.NdJ("click",function(){return i.tryRegister()}),e._uU(85," Register "),e.qZA(),e.TgZ(86,"ion-button",29),e.NdJ("click",function(){return i.goToLoginPage()}),e._uU(87," Cancel "),e.qZA(),e.qZA()),2&o&&(e.xp6(17),e.Q6J("formGroup",i.registerForm),e.xp6(14),e.Q6J("ngForOf",i.validationMessasges.firstName),e.xp6(8),e.Q6J("ngForOf",i.validationMessasges.lastName),e.xp6(8),e.Q6J("ngForOf",i.validationMessasges.email),e.xp6(14),e.Q6J("ngForOf",i.validationMessasges.password),e.xp6(8),e.Q6J("ngForOf",i.validationMessasges.password),e.xp6(4),e.Q6J("disabled",!i.registerForm.valid),e.xp6(7),e.Q6J("isOpen",i.registerSuccessModal),e.xp6(4),e.Q6J("disabled",!i.registerForm.valid))},directives:[r.Gu,r.sr,r.Sm,r.oU,r.cs,r.wd,r.W2,r.jY,r.Nd,r.wI,r.YG,r.gu,s._Y,s.JL,s.sg,r.Ie,r.Q$,r.yW,r.pK,r.j9,s.Q7,s.JJ,s.u,s.nD,p.sg,r.ki,r.fr,p.O5],styles:["#register-button-lg[_ngcontent-%COMP%], #cancel-button-lg[_ngcontent-%COMP%]{width:150px}#register-form[_ngcontent-%COMP%]{padding:0 8em}.register-background-lg[_ngcontent-%COMP%]{background-image:url(https://media-cdn.tripadvisor.com/media/photo-m/1280/1a/4d/d2/76/palm-trees-marigot-bay.jpg);background-size:cover;background-repeat:no-repeat;height:100vh}"]}),t})()}];let F=(()=>{class t{}return t.\u0275fac=function(o){return new(o||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[[h.Bz.forChild(R)],h.Bz]}),t})(),N=(()=>{class t{}return t.\u0275fac=function(o){return new(o||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[[p.ez,s.u5,s.UX,r.Pc,F]]}),t})()}}]);